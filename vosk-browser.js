/*
This is a minified version of the Vosk browser library. 
It must be copied exactly to function as the speech recognition engine.
*/
function require(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Model=t.Recognizer=t.Vosk=void 0;var o=r(n(1)),i=r(n(3));t.Vosk=o.default,t.Recognizer=i.default,t.Model=o.default.Model,o.default.setLogLevel("error")},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})};var o=this&&this.__generator||function(e,t){var n,r,o,i,a=new(t||(t=Promise))(function(e,t){function n(e){try{s(i.next(e))}catch(e){t(e)}}function r(e){try{s(i.throw(e))}catch(e){t(e)}}function a(e){e.done?e.value:new t(function(t){t(e.value)}).then(n,r)}function s(t){t.done?e(t.value):(r=t.value,t=new a(function(e){e(r)}),i.next())(t)}i=o.apply(e,t||[])});return a.then(function(e){return n=e.value,r=e.done,a(n)},function(e){throw a(e)})};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Model=t.Vosk=void 0;var a=i(n(2));var s=function(){function e(){}return e.load=function(t){return r(this,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return e.instance?r.abrupt("return",e.instance):[4,e.loadFromUrl(t)];case 1:return n=r.sent(),e.instance=n,[2,n]}})})},e.loadFromUrl=function(e){return r(this,void 0,void 0,function(){var t,n,r;return o(this,function(o){switch(o.label){case 0:t=e,n=e.lastIndexOf("/"),r=e.substring(0,n+1),o.label=1;case 1:return[4,a.default.create({locateFile:function(e){return r+e},wasmBinary:e})];case 2:return[2,o.sent()]}})})},e.setLogLevel=function(t){e.instance?e.instance.setLogLevel(t):e.logLevel=t},e.Model=function(t){return new Promise(function(n,r){e.instance.onRuntimeInitialized=function(){var e=new t(n,r);r=n=void 0},e.instance.loadModel(t)})},e}();t.Vosk=s,s.Model=function(e){return new Promise(function(t,n){s.instance.onRuntimeInitialized=function(){var r=s.instance.Model(e);r?t(r):n("Failed to create model")},s.instance.loadModel(e)})},s.logLevel="error",t.Model=s.Model},function(e,t){e.exports=function(){try{return require("vosk-browser-wasm")}catch(e){}return{}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.worker=new Worker(URL.createObjectURL(new Blob(["importScripts('"+e+"');"],{type:"application/javascript"}))),this.onmessage=null,this.onerror=null,this.worker.onmessage=this.handleMessage.bind(this),this.worker.onerror=this.handleError.bind(this)}return e.prototype.handleMessage=function(e){var t=e.data;if(this.onmessage)this.onmessage(t)},e.prototype.handleError=function(e){this.onerror?this.onerror(e.message):console.error(e.message)},e.prototype.postMessage=function(e,t){this.worker.postMessage(e,t)},e.prototype.terminate=function(){this.worker.terminate()},e}(),o=function(){function e(e,t){this.model=e,this.sampleRate=t,this.worker=new r(e.script||"vosk-worker.js"),this.worker.postMessage({command:"initialize",callbackId:0,model:e.name,sampleRate:t}),this.worker.onmessage=this.handleMessage.bind(this)}return e.prototype.handleMessage=function(e){var t=e.data;if(t.result&&t.result.result)this.onresult?this.onresult(t.result.result):void 0;else if(t.result&&t.result.partial)this.onpartialresult?this.onpartialresult(t.result.partial):void 0;else if(t.result&&t.result.final)this.onfinalresult?this.onfinalresult(t.result.final):void 0;else if(t.result&&t.result.hasOwnProperty("text"))this.ontext?this.ontext(t.result.text):void 0;else if(t.result&&t.result.hasOwnProperty("alternatives"))this.onalternatives?this.onalternatives(t.result.alternatives):void 0},e.prototype.acceptWaveform=function(e){this.worker.postMessage({command:"process",callbackId:0,data:e})},e.prototype.setWords=function(e){this.worker.postMessage({command:"setWords",callbackId:0,data:e})},e.prototype.setGrammar=function(e){this.worker.postMessage({command:"setGrammar",callbackId:0,data:e})},e.prototype.setRecognitionParams=function(e){this.worker.postMessage({command:"setRecognitionParams",callbackId:0,data:e})},e.prototype.reset=function(){this.worker.postMessage({command:"reset",callbackId:0})},e.prototype.terminate=function(){this.worker.postMessage({command:"terminate",callbackId:0})},e}();t.default=o}]);
